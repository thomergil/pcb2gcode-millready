# pcb2gcode-millready

A Python utility to optimize G-code files generated by [pcb2gcode](https://github.com/pcb2gcode/pcb2gcode) for CNC milling operations.

**Note: This code and documentation was mostly generated with the assistance of AI (Claude).**

## Features

This tool performs two main optimizations:

1. **Removes initial tool change sequences** — Eliminates the initial tool change operation that pauses the machine.
2. **Swaps Z and X/Y moves** — This arranges the first plunge operation to ensure the tool moves to Z=0, then to the XY starting position, before plunging; this reduces the risk of damage to the drill bit and the jig.

## Installation

No installation is required. The script is a standalone Python file that requires Python 3.

```bash
# Clone the repository or download the script
git clone https://github.com/thomergil/pcb2gcode-millready
cd pcb2gcode-millready

# Make the script executable (Linux/macOS)
chmod +x pcb2gcode-millready.py
```

## Usage

Basic usage:

```bash
./pcb2gcode-millready.py input.ngc output.ngc
```

Where:
- `input.ngc` is your G-code file generated by pcb2gcode
- `output.ngc` is the path where the modified G-code will be saved

### Command-line Options

The script supports the following command-line options:

```
  -h, --help            Show this help message and exit
  --no-swap             Skip swapping Z and X,Y moves (default: perform swap)
  --no-remove-tool-change
                        Skip removing tool change sequences (default: remove sequences)
  --version             Show program's version number and exit
```

### Examples

Process a G-code file with all optimizations (default):

```bash
./pcb2gcode-millready.py trace.ngc trace_millready.ngc
```

Only remove tool change sequences, but don't modify Z/XY moves:

```bash
./pcb2gcode-millready.py trace.ngc trace_millready.ngc --no-swap
```

Only swap Z/XY moves, but keep the tool change sequences:

```bash
./pcb2gcode-millready.py trace.ngc trace_millready.ngc --no-remove-tool-change
```

## Workflow with pcb2gcode

1. Generate G-code from your PCB files using pcb2gcode
2. Process the G-code with this utility
3. Run the optimized G-code on your CNC machine

Example workflow:

```bash
# Generate G-code with pcb2gcode
pcb2gcode --front=front.gbr --outline=outline.gbr --drill=drill.drl

# Process the generated G-code
./pcb2gcode-millready.py front.ngc front_millready.ngc
./pcb2gcode-millready.py outline.ngc outline_millready.ngc
./pcb2gcode-millready.py drill.ngc drill_millready.ngc

# Use the optimized files with your CNC controller
```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details. 
